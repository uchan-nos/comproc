<!DOCTYPE html>
<html lang="ja">
<head>
    <meta chatset="utf-8">
    <title>Visualisation</title>
    <!--
    <link rel="stylesheet" type="text/css" href="css/vis.css">
    <script type="text/javascript" src="js/vis.js"></script>
    -->
</head>
<body>
<p>
    <img id="frame_img" src="vis-0.svg" alt="Frame 000000">
</p>
<p>
    <input type="button" value="← Prev Frame" onclick="prevFrame();">
    <input type="button" value="Next Frame →" onclick="nextFrame();">
</p>
<h3>Machine code</h3>
<p>
{{ program_hex }}
</p>

    <script type="text/javascript">
        let frame = 0;
        let next_frame_image = new Image();
        let frame_image = document.getElementById('frame_img');
        next_frame_image.src = 'vis-' + (frame + 1) + '.svg';
        function nextFrame() {
            if (frame >= {{ max_frame }}) {
                return;
            }
            frame++;
            frame_image.src = next_frame_image.src;
            next_frame_image.src = 'vis-' + (frame + 1) + '.svg';
        }
        function prevFrame() {
            if (frame == 0) {
                return;
            }
            frame--;
            next_frame_image.src = frame_image.src;
            frame_image.src = 'vis-' + frame + '.svg';
        }

        document.addEventListener('keydown', function(event) {
            if (event.code == 'ArrowLeft') {
                prevFrame();
            } else if (event.code == 'ArrowRight') {
                nextFrame();
            }
        });
    </script>
</body>
</html>